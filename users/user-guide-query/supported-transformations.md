---
description: >-
  This document contains the list of all the transformation functions supported
  by Pinot SQL.
---

# Transformation Functions

## Math Functions

| Function                      | Description                                   | Example                                          |
| ----------------------------- | --------------------------------------------- | ------------------------------------------------ |
| **ADD(col1, col2, col3...)**  | Sum of at least two values                    | `ADD(score_maths, score_science, score_history)` |
| **SUB(col1, col2)**           | Difference between two values                 | `SUB(total_score, score_science)`                |
| **MULT(col1, col2, col3...)** | Product of at least two values                | `MUL(score_maths, score_science, score_history)` |
| **DIV(col1, col2)**           | Quotient of two values                        | `SUB(total_score, total_subjects)`               |
| **MOD(col1, col2)**           | Modulo of two values                          | `MOD(total_score, total_subjects)`               |
| **ABS(col1)**                 | Absolute of a value                           | `ABS(score)`                                     |
| **CEIL(col1)**                | Rounded up to the nearest integer.            | `CEIL(percentage)`                               |
| **FLOOR(col1)**               | Rounded down to the nearest integer.          | `FLOOR(percentage)`                              |
| **EXP(col1)**                 | Eulerâ€™s number(e) raised to the power of col. | `EXP(age)`                                       |
| **LN(col1)**                  | Natural log of value i.e. ln(col1)            | `LN(age)`                                        |
| **SQRT(col1)**                | Square root of a value                        | `SQRT(height)`                                   |

## String Functions

Multiple string functions are supported out of the box from release-0.5.0 .

| Function                                                                                                                                                                                                                                                                            | Description                                                                                                                                                                | Example                                                                                                                 |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------- |
| <p><a href="../../configuration-reference/functions/upper.md"><strong>UPPER</strong></a>(col)<br>convert string to upper case</p>                                                                                                                                                   |                                                                                                                                                                            | `UPPER(playerName)`                                                                                                     |
| <p><a href="../../configuration-reference/functions/lower.md"><strong>LOWER</strong></a>(col)<br>convert string to lower case</p>                                                                                                                                                   | convert string to lower case                                                                                                                                               | `LOWER(playerName)`                                                                                                     |
| <p><a href="../../configuration-reference/functions/reverse.md"><strong>REVERSE</strong></a>(col)<br>reverse the string</p>                                                                                                                                                         |                                                                                                                                                                            | `REVERSE(playerName)`                                                                                                   |
| <p><a href="../../configuration-reference/functions/substr.md"><strong>SUBSTR</strong></a>(col, startIndex, endIndex)<br>get substring of the input string from start to endIndex.<br>Index begins at 0.<br>Set endIndex to -1 to calculate till end of the string</p>              |                                                                                                                                                                            | <p><code>SUBSTR(playerName, 1, -1)</code></p><p>&#x3C;code>&#x3C;/code></p><p><code>SUBSTR(playerName, 1, 4)</code></p> |
| <p><a href="../../configuration-reference/functions/concat.md"><strong>CONCAT(col1, col2, seperator)</strong></a><br>Concatenate two input strings using the seperator</p>                                                                                                          | Concatenate two input strings using the seperator                                                                                                                          | `CONCAT(firstName, lastName, '-')`                                                                                      |
| <p><a href="../../configuration-reference/functions/trim.md"><strong>TRIM(col)</strong></a><br>trim spaces from both side of the string</p>                                                                                                                                         | trim spaces from both side of the string                                                                                                                                   | `TRIM(playerName)`                                                                                                      |
| <p><a href="../../configuration-reference/functions/ltrim.md"><strong>LTRIM(col)</strong></a><br>trim spaces from left side of the string</p>                                                                                                                                       | trim spaces from left side of the string                                                                                                                                   | `LTRIM(playerName)`                                                                                                     |
| <p><a href="../../configuration-reference/functions/rtrim.md"><strong>RTRIM(col)</strong></a><br>trim spaces from right side of the string</p>                                                                                                                                      | trim spaces from right side of the string                                                                                                                                  | `RTRIM(playerName)`                                                                                                     |
| <p><a href="../../configuration-reference/functions/length.md"><strong>LENGTH(col)</strong></a><br>calculate length of the string</p>                                                                                                                                               | calculate length of the string                                                                                                                                             | `LENGTH(playerName)`                                                                                                    |
| <p><a href="../../configuration-reference/functions/strpos.md"><strong>STRPOS(col, find, N)</strong></a><br>find Nth instance of <code>find</code> string in input.<br>Returns 0 if input string is empty. Returns -1 if the Nth instance is not found or input string is null.</p> | <p>find Nth instance of <code>find</code> string in input.<br>Returns 0 if input string is empty. Returns -1 if the Nth instance is not found or input string is null.</p> | `STRPOS(playerName, 'david', 1)`                                                                                        |
| <p><a href="../../configuration-reference/functions/startswith.md"><strong>STARTSWITH(col, prefix)</strong></a><br>returns <code>true</code> if columns starts with prefix string.</p>                                                                                              | returns `true` if columns starts with prefix string.                                                                                                                       | `STARTSWITH(playerName, 'david')`                                                                                       |
| <p><a href="../../configuration-reference/functions/replace.md"><strong>REPLACE(col, find, substitute)</strong></a><br>replace all instances of <code>find</code> with <code>replace</code> in input</p>                                                                            | replace all instances of `find` with `replace` in input                                                                                                                    | `REPLACE(playerName, 'david', 'henry')`                                                                                 |
| <p><a href="../../configuration-reference/functions/rpad.md"><strong>RPAD(col, size, pad)</strong></a><br>string padded from the right side with <code>pad</code> to reach final <code>size</code></p>                                                                              | string padded from the right side with `pad` to reach final `size`                                                                                                         | `RPAD(playerName, 20, 'foo')`                                                                                           |
| <p><a href="../../configuration-reference/functions/lpad.md"><strong>LPAD(col, size, pad)</strong></a><br>string padded from the left side with <code>pad</code> to reach final <code>size</code></p>                                                                               | string padded from the left side with `pad` to reach final `size`                                                                                                          | `LPAD(playerName, 20, 'foo')`                                                                                           |
| <p><a href="../../configuration-reference/functions/codepoint.md"><strong>CODEPOINT(col)</strong></a><br>the Unicode codepoint of the first character of the string</p>                                                                                                             | the Unicode codepoint of the first character of the string                                                                                                                 | `CODEPOINT(playerName)`                                                                                                 |
| <p><a href="../../configuration-reference/functions/chr.md"><strong>CHR(codepoint)</strong></a><br>the character corresponding to the Unicode codepoint</p>                                                                                                                         | the character corresponding to the Unicode codepoint                                                                                                                       | `CHR(68)`                                                                                                               |

## DateTime Functions

Date time functions allow you to perform transformations on columns that contain timestamps or dates.

| Function                                                                                                                                                                                                                                                                                         | Description                                                                                                                                           | Example                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <p><a href="../../configuration-reference/functions/timeconvert.md"><strong>TIMECONVERT(col, fromUnit, toUnit)</strong></a><br>Converts the value into another time unit. the column should be an epoch timestamp.</p>                                                                           | Converts the value into another time unit. the column should be an epoch timestamp.                                                                   | `TIMECONVERT(time, 'MILLISECONDS', 'SECONDS')`This expression converts the value of column `time` (taken to be in milliseconds) to the nearest seconds (_i.e._ the nearest seconds that is lower than the value of `date` column)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <p><a href="../../configuration-reference/functions/datetimeconvert.md"><strong>DATETIMECONVERT(columnName, inputFormat, outputFormat, outputGranularity)</strong></a><br>Converts the value into another date time format, and buckets time based on the given time granularity.</p>            | Converts the value into another date time format, and buckets time based on the given time granularity.                                               | <ul><li><code>Date</code> from <code>hoursSinceEpoch</code> to <code>daysSinceEpoch</code> and bucket it to 1 day granularity<br><br><code>DATETIMECONVERT(Date, '1:HOURS:EPOCH', '1:DAYS:EPOCH', '1:DAYS')</code><br></li><li><code>Date</code> to 15 minutes granularity<br><br><code>DATETIMECONVERT(Date, '1:MILLISECONDS:EPOCH', '1:MILLISECONDS:EPOCH', '15:MINUTES')</code><br></li><li><code>Date</code> from <code>hoursSinceEpoch</code> to format <code>yyyyMdd</code> and bucket it to 1 days granularity<br><br><code>DATETIMECONVERT(Date, '1:HOURS:EPOCH', '1:DAYS:SIMPLE_DATE_FORMAT:yyyyMMdd', '1:DAYS')</code><br><br></li><li><code>Date</code> from milliseconds to format <code>yyyyMdd</code> in timezone PST<br><br><code>DATETIMECONVERT(Date, '1:MILLISECONDS:EPOCH', '1:DAYS:SIMPLE_DATE_FORMAT:yyyyMMdd tz(America/Los_Angeles)', '1:DAYS')</code></li></ul> |
| <p><a href="../../configuration-reference/functions/datetrunc.md"><strong>DATETRUNC</strong></a><br>Converts the value into a specified output granularity seconds since UTC epoch that is bucketed on a unit in a specified timezone.</p>                                                       | Converts the value into a specified output granularity seconds since UTC epoch that is bucketed on a unit in a specified timezone.                    | <p><code>DATETRUNC('week', time_in_seconds, 'SECONDS')</code> This expression converts the column <code>time_in_seconds</code>, which is a long containing seconds since UTC epoch truncated at <code>WEEK</code> (where a Week starts at Monday UTC midnight). The output is a long seconds since UTC epoch.<br></p><p><code>DATETRUNC('quarter', DIV(time_milliseconds/1000), 'SECONDS', 'America/Los_Angeles', 'HOURS')</code> This expression converts the expression <code>time_in_milliseconds/1000</code>into hours that are truncated to <code>QUARTER</code> at the Los Angeles time zone (where a Quarter begins on 1/1, 4/1, 7/1, 10/1 in Los Angeles timezone). The output is expressed as hours since UTC epoch (note that the output is not Los Angeles timezone)</p>                                                                                                     |
| <p><a href="../../configuration-reference/functions/toEpoch.md"><strong>ToEpoch&#x3C;TIME_UNIT>(timeInMillis)</strong></a><br>Convert epoch milliseconds to epoch &#x3C;Time Unit>.</p>                                                                                                          | Convert epoch milliseconds to epoch \<Time Unit>.                                                                                                     | <p><code>ToEpochSeconds(tsInMillis):</code>Converts column <code>tsInMillis</code> value from epoch milliseconds to epoch seconds.</p><p><code>ToEpochDays(tsInMillis):</code>Converts column <code>tsInMillis</code> value from epoch milliseconds to epoch days.</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <p><a href="../../configuration-reference/functions/toEpochRounded.md"><strong>ToEpoch&#x3C;TIME_UNIT>Rounded(timeInMillis, bucketSize)</strong></a><br>Convert epoch milliseconds to epoch &#x3C;Time Unit>, round to nearest rounding bucket(Bucket size is defined in &#x3C;Time Unit>).</p>  | Convert epoch milliseconds to epoch \<Time Unit>, round to nearest rounding bucket(Bucket size is defined in \<Time Unit>).                           | <p><code>ToEpochSecondsRound(tsInMillis, 10):</code>Converts column <code>tsInMillis</code> value from epoch milliseconds to epoch seconds and round to the 10-minute bucket value. E.g.<code>ToEpochSecondsRound(</code>1613472303000, 10) = 1613472300</p><p><code>ToEpochMinutesRound(tsInMillis, 1440):</code>Converts column <code>tsInMillis</code> value from epoch milliseconds to epoch Minutes, but round to 1-day bucket value. E.g.<code>ToEpochMinutesRound(</code>1613472303000, 1440) = 26890560</p>                                                                                                                                                                                                                                                                                                                                                                     |
| <p><a href="../../configuration-reference/functions/toEpochBucket.md"><strong>ToEpoch&#x3C;TIME_UNIT>Bucket(timeInMillis, bucketSize)</strong></a><br>Convert epoch milliseconds to epoch &#x3C;Time Unit>, and divided by bucket size(Bucket size is defined in &#x3C;Time Unit>).</p>          | Convert epoch milliseconds to epoch \<Time Unit>, and divided by bucket size(Bucket size is defined in \<Time Unit>).                                 | <p><code>ToEpochSecondsBucket(tsInMillis, 10):</code>Converts column <code>tsInMillis</code> value from epoch milliseconds to epoch seconds then divide by 10 to get the 10 seconds since epoch value. E.g.</p><p><code>ToEpochSecondsBucket(</code>1613472303000, 10) = 161347230</p><p><code>ToEpochHoursBucket(tsInMillis, 24):</code>Converts column <code>tsInMillis</code> value from epoch milliseconds to epoch Hours, then divide by 24 to get 24 hours since epoch value.</p>                                                                                                                                                                                                                                                                                                                                                                                                 |
| <p><a href="../../configuration-reference/functions/fromEpoch.md"><strong>FromEpoch&#x3C;TIME_UNIT></strong><br></a>Convert epoch &#x3C;Time Unit> to epoch milliseconds.<a href="../../configuration-reference/functions/fromEpoch.md"><strong>(timeIn&#x3C;Time_UNIT>)</strong></a></p>        | Convert epoch \<Time Unit> to epoch milliseconds.                                                                                                     | <p><code>FromEpochSeconds(tsInSeconds):</code>Converts column <code>tsInSeconds</code> value from epoch seconds to epoch milliseconds. E.g.</p><p><code>FromEpochSeconds(</code>1613472303) = 1613472303000</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/fromEpochBucket.md"><strong>FromEpoch&#x3C;TIME_UNIT>Bucket(timeIn&#x3C;Time_UNIT>, bucketSizeIn&#x3C;Time_UNIT>)</strong></a><br>Convert epoch &#x3C;Bucket Size>&#x3C;Time Unit> to epoch milliseconds.</p>                                | Convert epoch \<Bucket Size>\<Time Unit> to epoch milliseconds.                                                                                       | <p><code>FromEpochSecondsBucket(tsInSeconds, 10):</code>Converts column <code>tsInSeconds</code> value from epoch 10-seconds to epoch milliseconds. E.g.</p><p><code>FromEpochSeconds(161347231)= 1613472310000</code></p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <p><a href="../../configuration-reference/functions/todatetime.md"><strong>ToDateTime(timeInMillis, pattern[, timezoneId])</strong></a><br>Convert epoch millis value to DateTime string represented by pattern.</p>                                                                             | Convert epoch millis value to DateTime string represented by pattern.                                                                                 | <p><code>ToDateTime(tsInMillis, 'yyyy-MM-dd')</code> converts tsInMillis value to date time pattern <code>yyyy-MM-dd</code></p><p><code>ToDateTime(tsInMillis, 'yyyy-MM-dd ZZZ', 'America/Los_Angeles')</code> converts tsInMillis value to date time pattern <code>yyyy-MM-dd ZZZ</code> in America/Los_Angeles time zone</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <p><a href="../../configuration-reference/functions/fromdatetime.md"><strong>FromDateTime(dateTimeString, pattern)</strong></a><br>Convert DateTime string represented by pattern to epoch millis.</p>                                                                                           | Convert DateTime string represented by pattern to epoch millis.                                                                                       | `FromDateTime(dateTime, 'yyyy-MM-dd')`converts `dateTime` string value to millis epoch value                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <p><a href="../../configuration-reference/functions/round.md"><strong>round(timeValue, bucketSize)</strong></a><br>Round the given time value to nearest bucket start value.</p>                                                                                                                 | Round the given time value to nearest bucket start value.                                                                                             | `round(tsInSeconds, 60)` round seconds epoch value to the start value of the 60 seconds bucket it belongs to. E.g. `round(161347231, 60)= 161347200`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <p><a href="../../configuration-reference/functions/now.md"><strong>now()</strong></a><br>Return current time as epoch millis</p>                                                                                                                                                                | Return current time as epoch millis                                                                                                                   | Typically used in predicate to filter on timestamp for recent data. E.g. filter data on recent 1 day(86400 seconds).`WHERE tsInMillis > now() - 86400000`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <p><a href="../../configuration-reference/functions/timezoneHour.md"><strong>timezoneHour(timeZoneId)</strong></a><br>Returns the hour of the time zone offset.</p>                                                                                                                              | Returns the hour of the time zone offset.                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/timezoneMinute.md"><strong>timezoneMinute(timeZoneId)</strong></a><br>Returns the minute of the time zone offset.</p>                                                                                                                        | Returns the minute of the time zone offset.                                                                                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/year.md"><strong>year(tsInMillis)</strong></a><br>Returns the year from the given epoch millis in UTC timezone.</p>                                                                                                                          | Returns the year from the given epoch millis in UTC timezone.                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/year.md"><strong>year(tsInMillis, timeZoneId)</strong></a><br>Returns the year from the given epoch millis and timezone id.</p>                                                                                                              | Returns the year from the given epoch millis and timezone id.                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/yearOfWeek.md"><strong>yearOfWeek(tsInMillis)</strong></a><br>Returns the year of the ISO week from the given epoch millis in UTC timezone. Alias <code>yow</code>is also supported.</p>                                                     | Returns the year of the ISO week from the given epoch millis in UTC timezone. Alias `yow`is also supported.                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/yearOfWeek.md"><strong>yearOfWeek(tsInMillis, timeZoneId)</strong></a><br>Returns the year of the ISO week from the given epoch millis and timezone id. Alias <code>yow</code>is also supported.</p>                                         | Returns the year of the ISO week from the given epoch millis and timezone id. Alias `yow`is also supported.                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/quarter.md"><strong>quarter(tsInMillis)</strong></a><br>Returns the quarter of the year from the given epoch millis in UTC timezone. The value ranges from 1 to 4.</p>                                                                       | Returns the quarter of the year from the given epoch millis in UTC timezone. The value ranges from 1 to 4.                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/quarter.md"><strong>quarter(tsInMillis, timeZoneId)</strong></a><br>Returns the quarter of the year from the given epoch millis and timezone id. The value ranges from 1 to 4.</p>                                                           | Returns the quarter of the year from the given epoch millis and timezone id. The value ranges from 1 to 4.                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/month.md"><strong>month(tsInMillis)</strong></a><br>Returns the month of the year from the given epoch millis in UTC timezone. The value ranges from 1 to 12.</p>                                                                            | Returns the month of the year from the given epoch millis in UTC timezone. The value ranges from 1 to 12.                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/month.md"><strong>month(tsInMillis, timeZoneId)</strong></a><br>Returns the month of the year from the given epoch millis and timezone id. The value ranges from 1 to 12.</p>                                                                | Returns the month of the year from the given epoch millis and timezone id. The value ranges from 1 to 12.                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/week.md"><strong>week(tsInMillis)</strong></a><br>Returns the ISO week of the year from the given epoch millis in UTC timezone. The value ranges from 1 to 53. Alias <code>weekOfYear</code> is also supported.</p>                          | Returns the ISO week of the year from the given epoch millis in UTC timezone. The value ranges from 1 to 53. Alias `weekOfYear` is also supported.    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/week.md"><strong>week(tsInMillis, timeZoneId)</strong></a><br>Returns the ISO week of the year from the given epoch millis and timezone id. The value ranges from 1 to 5</p>                                                                 | Returns the ISO week of the year from the given epoch millis and timezone id. The value ranges from 1 to 53. Alias `weekOfYear` is also supported.    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/dayofyear.md"><strong>dayOfYear(tsInMillis)</strong></a><br>Returns the day of the year from the given epoch millis in UTC timezone. The value ranges from 1 to 366. Alias <code>doy</code> is also supported.</p>                           | Returns the day of the year from the given epoch millis in UTC timezone. The value ranges from 1 to 366. Alias `doy` is also supported.               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/dayofyear.md"><strong>dayOfYear(tsInMillis, timeZoneId)</strong></a><br>Returns the day of the year from the given epoch millis and timezone id. The value ranges from 1 to 366. Alias <code>doy</code> is also supported.</p>               | Returns the day of the year from the given epoch millis and timezone id. The value ranges from 1 to 366. Alias `doy` is also supported.               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/day.md"><strong>day(tsInMillis)</strong></a><br>Returns the day of the month from the given epoch millis in UTC timezone. The value ranges from 1 to 31. Alias <code>dayOfMonth</code> is also supported.</p>                                | Returns the day of the month from the given epoch millis in UTC timezone. The value ranges from 1 to 31. Alias `dayOfMonth` is also supported.        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/day.md"><strong>day(tsInMillis, timeZoneId)</strong></a><br>Returns the day of the month from the given epoch millis and timezone id. The value ranges from 1 to 31. Alias <code>dayOfMonth</code> is also supported.</p>                    | Returns the day of the month from the given epoch millis and timezone id. The value ranges from 1 to 31. Alias `dayOfMonth` is also supported.        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/dayofweek.md"><strong>dayOfWeek(tsInMillis)</strong></a><br>Returns the day of the week from the given epoch millis in UTC timezone. The value ranges from 1(Monday) to 7(Sunday). Alias <code>dow</code> is also supported.</p>             | Returns the day of the week from the given epoch millis in UTC timezone. The value ranges from 1(Monday) to 7(Sunday). Alias `dow` is also supported. |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/dayofweek.md"><strong>dayOfWeek(tsInMillis, timeZoneId)</strong></a><br>Returns the day of the week from the given epoch millis and timezone id. The value ranges from 1(Monday) to 7(Sunday). Alias <code>dow</code> is also supported.</p> | Returns the day of the week from the given epoch millis and timezone id. The value ranges from 1(Monday) to 7(Sunday). Alias `dow` is also supported. |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/hour.md"><strong>hour(tsInMillis)</strong></a><br>Returns the hour of the day from the given epoch millis in UTC timezone. The value ranges from 0 to 23.</p>                                                                                | Returns the hour of the day from the given epoch millis in UTC timezone. The value ranges from 0 to 23.                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/hour.md"><strong>hour(tsInMillis, timeZoneId)</strong></a><br>Returns the hour of the day from the given epoch millis and timezone id. The value ranges from 0 to 23.</p>                                                                    | Returns the hour of the day from the given epoch millis and timezone id. The value ranges from 0 to 23.                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/minute.md"><strong>minute(tsInMillis)</strong></a><br>Returns the minute of the hour from the given epoch millis in UTC timezone. The value ranges from 0 to 59.</p>                                                                         | Returns the minute of the hour from the given epoch millis in UTC timezone. The value ranges from 0 to 59.                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/minute.md"><strong>minute(tsInMillis, timeZoneId)</strong></a><br>Returns the minute of the hour from the given epoch millis and timezone id. The value ranges from 0 to 59.</p>                                                             | Returns the minute of the hour from the given epoch millis and timezone id. The value ranges from 0 to 59.                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/second.md"><strong>second(tsInMillis)</strong></a><br>Returns the second of the minute from the given epoch millis in UTC timezone. The value ranges from 0 to 59.</p>                                                                       | Returns the second of the minute from the given epoch millis in UTC timezone. The value ranges from 0 to 59.                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/second.md"><strong>second(tsInMillis, timeZoneId)</strong></a><br>Returns the second of the minute from the given epoch millis and timezone id. The value ranges from 0 to 59.</p>                                                           | Returns the second of the minute from the given epoch millis and timezone id. The value ranges from 0 to 59.                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/millisecond.md"><strong>millisecond(tsInMillis)</strong></a><br>Returns the millisecond of the second from the given epoch millis in UTC timezone. The value ranges from 0 to 999.</p>                                                       | Returns the millisecond of the second from the given epoch millis in UTC timezone. The value ranges from 0 to 999.                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <p><a href="../../configuration-reference/functions/millisecond.md"><strong>millisecond(tsInMillis, timeZoneId)</strong></a><br>Returns the millisecond of the second from the given epoch millis and timezone id. The value ranges from 0 to 999.</p>                                           | Returns the millisecond of the second from the given epoch millis and timezone id. The value ranges from 0 to 999.                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |

## JSON Functions

### **Transform Functions**

These functions can only be used in Pinot SQL queries.

|                                                                                                                                                                                                                                                                                                                                                                                                              |           |                                                                                                                                                                                                           |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Function**                                                                                                                                                                                                                                                                                                                                                                                                 | Type      | **Description**                                                                                                                                                                                           |
| <p><a href="../../configuration-reference/functions/jsonextractscalar.md"><strong>JSONEXTRACTSCALAR(jsonField, 'jsonPath', 'resultsType', [defaultValue])</strong></a><strong></strong><br><strong></strong>Evaluates the <code>'jsonPath'</code> on <code>jsonField</code>, returns the result as the type <code>'resultsType'</code>, use optional <code>defaultValue</code>for null or parsing error.</p> | Transform | <p>Evaluates the <code>'jsonPath'</code> on <code>jsonField,</code></p><p>returns the result as the type <code>'resultsType'</code>, use optional <code>defaultValue</code>for null or parsing error.</p> |
| <p><a href="../../configuration-reference/functions/jsonextractkey.md"><strong>JSONEXTRACTKEY</strong></a><a href="../../configuration-reference/functions/jsonextractkey.md"><strong>(</strong>jsonField, 'jsonPath'<strong>)</strong></a><strong></strong><br><strong></strong>Extracts all matched JSON field keys based on <code>'jsonPath'</code> into a<code>STRING_ARRAY.</code></p>                  | Transform | <p>Extracts all matched JSON field keys based on <code>'jsonPath'</code></p><p>Into a<code>STRING_ARRAY.</code></p>                                                                                       |

### **Scalar Functions**

These functions can be used for column transformation in table ingestion configs.

|                                                                                                                                                                                                                                                                                                                                          |        |                                                                                                                                                                                                                           |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Function**                                                                                                                                                                                                                                                                                                                             | Type   | **Description**                                                                                                                                                                                                           |
| <p><strong>TOJSONMAPSTR</strong>(map)<br>Convert map to JSON String</p>                                                                                                                                                                                                                                                                  | Scalar | Convert map to JSON String                                                                                                                                                                                                |
| <p><strong>JSONFORMAT</strong>(object)<br>Convert object to JSON String</p>                                                                                                                                                                                                                                                              | Scalar | Convert object to JSON String                                                                                                                                                                                             |
| <p><strong>JSONPATH</strong>(jsonField, 'jsonPath')<br>Extracts the object value from <code>jsonField</code> based on <code>'jsonPath'</code>, the result type is inferred based on JSON value. <strong>Cannot be used in query because data type is not specified.</strong></p>                                                         | Scalar | Extracts the object value from `jsonField` based on `'jsonPath'`, the result type is inferred based on JSON value. **Cannot be used in query because data type is not specified.**                                        |
| <p><strong>JSONPATHLONG</strong>(jsonField, 'jsonPath', [defaultValue])<br>Extracts the <strong>Long</strong> value from <code>jsonField</code> based on <code>'jsonPath'</code>, use optional <code>defaultValue</code>for null or parsing error.</p>                                                                                   | Scalar | Extracts the **Long** value from `jsonField` based on `'jsonPath'`, use optional `defaultValue`for null or parsing error.                                                                                                 |
| <p><strong>JSONPATHDOUBLE</strong>(jsonField, 'jsonPath', [defaultValue])<br>Extracts the <strong>Double</strong> value from <code>jsonField</code> based on <code>'jsonPath'</code>, use optional <code>defaultValue</code>for null or parsing error.</p>                                                                               | Scalar | Extracts the **Double** value from `jsonField` based on `'jsonPath'`, use optional `defaultValue`for null or parsing error.                                                                                               |
| <p><strong>JSONPATHSTRING</strong>(jsonField, 'jsonPath', [defaultValue])<br>Extracts the <strong>String</strong> value from <code>jsonField</code> based on <code>'jsonPath'</code>, use optional <code>defaultValue</code>for null or parsing error.</p>                                                                               | Scalar | Extracts the **String** value from `jsonField` based on `'jsonPath'`, use optional `defaultValue`for null or parsing error.                                                                                               |
| <p><strong>JSONPATHARRAY</strong>(jsonField, 'jsonPath')<br>Extracts an array from <code>jsonField</code> based on <code>'jsonPath'</code>, the result type is inferred based on JSON value. <strong>Cannot be used in query because data type is not specified.</strong></p>                                                            | Scalar | Extracts an array from `jsonField` based on `'jsonPath'`, the result type is inferred based on JSON value. **Cannot be used in query because data type is not specified.**                                                |
| <p><strong>JSONPATHARRAYDEFAULTEMPTY</strong>(jsonField, 'jsonPath')<br>Extracts an array from <code>jsonField</code> based on <code>'jsonPath'</code>, the result type is inferred based on JSON value. Returns empty array for null or parsing error. <strong>Cannot be used in query because data type is not specified.</strong></p> | Scalar | Extracts an array from `jsonField` based on `'jsonPath'`, the result type is inferred based on JSON value. Returns empty array for null or parsing error. **Cannot be used in query because data type is not specified.** |

**Usage**

|                  |                                                                                                                                                                                                                                                   |
| ---------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`Arguments`**  | **Description**                                                                                                                                                                                                                                   |
| `jsonField`      | An **Identifier**/**Expression** contains JSON documents.                                                                                                                                                                                         |
| `'jsonPath'`     | Follows [JsonPath Syntax](https://goessner.net/articles/JsonPath/) to read values from JSON documents.                                                                                                                                            |
| `'results_type'` | <p>One of the Pinot supported data types:<strong><code>INT, LONG, FLOAT, DOUBLE, BOOLEAN, TIMESTAMP, STRING,</code></strong></p><p><strong><code>INT_ARRAY, LONG_ARRAY, FLOAT_ARRAY, DOUBLE_ARRAY, STRING_ARRAY</code></strong><code>.</code></p> |

{% hint style="warning" %}
**`'jsonPath'`**` and`` `` `**`'results_type'`are literals.** Pinot uses single quotes to distinguish them from **identifiers**.

e.g.

* `JSONEXTRACTSCALAR(profile_json_str, '$.name', 'STRING')` is v**alid**.
* `JSONEXTRACTSCALAR(profile_json_str, "$.name", "STRING")` is i**nvalid**.
{% endhint %}

**Examples**

The examples below are based on these 3 sample profile JSON documents:

```
{
  "name" : "Bob",
  "age" : 37,
  "gender": "male",
  "location": "San Francisco"
},{
  "name" : "Alice",
  "age" : 25,
  "gender": "female",
  "location": "New York"
},{
  "name" : "Mia",
  "age" : 18,
  "gender": "female",
  "location": "Chicago"
}
```

Query 1: Extract string values from the field 'name'

```
SELECT
    JSONEXTRACTSCALAR(profile_json_str, '$.name', 'STRING')
FROM
    myTable
```

Results are

```
["Bob", "Alice", "Mia"]
```

Query 2: Extract integer values from the field 'age'

```
SELECT
    JSONEXTRACTSCALAR(profile_json_str, '$.age', 'INT')
FROM
    myTable
```

Results are

```
[37, 25, 18]
```

Query 3: Extract Bob's age from the JSON profile.

```
SELECT
    JSONEXTRACTSCALAR(myMapStr,'$.age','INT')
FROM
    myTable
WHERE
    JSONEXTRACTSCALAR(myMapStr,'$.name','STRING') = 'Bob'
```

Results are

```
[37]
```

Query 4: Extract all field keys of JSON profile.

```
SELECT
    JSONEXTRACTKEY(myMapStr,'$.*')
FROM
    myTable
```

Results are

```
["name", "age", "gender", "location"]
```

Another **example** of extracting JSON fields from below JSON record:

```
{
        "name": "Pete",
        "age": 24,
        "subjects": [{
                        "name": "maths",
                        "homework_grades": [80, 85, 90, 95, 100],
                        "grade": "A",
                        "score": 90
                },
                {
                        "name": "english",
                        "homework_grades": [60, 65, 70, 85, 90],
                        "grade": "B",
                        "score": 70
                }
        ]
}
```

Extract JSON fields:

| Expression                                                        | Value                  |
| ----------------------------------------------------------------- | ---------------------- |
| `JSONPATH(myJsonRecord, '$.name')`                                | `"Pete"`               |
| `JSONPATH(myJsonRecord, '$.age')`                                 | `24`                   |
| `JSONPATHSTRING(myJsonRecord, '$.age')`                           | `"24"`                 |
| `JSONPATHARRAY(myJsonRecord, '$.subjects[*].name')`               | `["maths", "english"]` |
| `JSONPATHARRAY(myJsonRecord, '$.subjects[*].score')`              | `[90, 70]`             |
| `JSONPATHARRAY(myJsonRecord, '$.subjects[*].homework_grades[1]')` | `[85, 65]`             |

## Binary Functions

| Function             | Description                                                        | Example           |
| -------------------- | ------------------------------------------------------------------ | ----------------- |
| **SHA(bytesCol)**    | Return SHA-1 digest of binary column(`bytes` type) as hex string   | `SHA(rawData)`    |
| **SHA256(bytesCol)** | Return SHA-256 digest of binary column(`bytes` type) as hex string | `SHA256(rawData)` |
| **SHA512(bytesCol)** | Return SHA-512 digest of binary column(`bytes` type) as hex string | `SHA512(rawData)` |
| **MD5(bytesCol)**    | Return MD5 digest of binary column(`bytes` type) as hex string     | `MD5(rawData)`    |

## Multi-value Column Functions

All of the functions mentioned till now only support single value columns. You can use the following functions to do operations on multi-value columns.

| Function        | Description                                                                                                                                                                                                                                                                                                                                                                     | Example                                      |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------- |
| **ARRAYLENGTH** | Returns the length of a multi-value column                                                                                                                                                                                                                                                                                                                                      |                                              |
| **MAP\_VALUE**  | Select the value for a key from Map stored in Pinot.                                                                                                                                                                                                                                                                                                                            | `MAP_VALUE(mapColumn, 'myKey', valueColumn)` |
| **VALUEIN**     | Takes at least 2 arguments, where the first argument is a multi-valued column, and the following arguments are constant values. The transform function will filter the value from the multi-valued column with the given constant values. The `VALUEIN` transform function is especially useful when the same multi-valued column is both filtering column and grouping column. | `VALUEIN(mvColumn, 3, 5, 15)`                |

## Advanced Queries

### Geospatial Queries

Pinot supports Geospatial queries on columns containing text-based geographies. For more details on the queries and how to enable them, see [Geospatial](../../basics/indexing/geospatial-support.md).

### Text Queries

Pinot supports pattern matching on text-based columns. Only the columns mentioned as text columns in table config can be queried using this method. For more details on how to enable pattern matching, see [Text search support](../../basics/indexing/text-search-support.md).
